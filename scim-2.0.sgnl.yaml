# SCIM 2.0 Configuration YAML for DS2.0
# Note: The externalId for each entity must match the endpoint for this resource i.e.
# - External ID for an User entity representing a User resource (/Users) is "Users"
# - External ID for a Group entity representing a Group resource (/Groups) is "Groups"

displayName: "SCIM 2.0"
icon: PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiBmaWxsPSIjMDEwMTAxIi8+CjxwYXRoIGQ9Ik0xNC4xOTgyIDM5Ljg5MzZDMTMuMDg1NCAzOS44OTM2IDExLjk5MjQgMzkuNjkxIDEwLjkyMTggMzkuMjg3MkM5Ljg0OTg5IDM4Ljg4MjEgOC44NzY0MSAzOC4yNjAzIDggMzcuNDIxOUw5Ljg5OTEyIDM1LjAxNjNDMTAuNTY1OSAzNS41OTAzIDExLjI1MSAzNi4wNDYxIDExLjk1NDQgMzYuMzg1MUMxMi42NTY0IDM2LjcyNDEgMTMuNDI0NSAzNi44OTI5IDE0LjI2MDEgMzYuODkyOUMxNC45MjgzIDM2Ljg5MjkgMTUuNDQ2IDM2Ljc2MzUgMTUuODE0NSAzNi41MDYxQzE2LjE4MzEgMzYuMjQ4NiAxNi4zNjc0IDM1Ljg5MTMgMTYuMzY3NCAzNS40MzU1VjM1LjM5MDVDMTYuMzY3NCAzNS4xNjk3IDE2LjMyOTQgMzQuOTc1NSAxNi4yNTIgMzQuODA1M0MxNi4xNzQ3IDM0LjYzNjUgMTYuMDI4NCAzNC40Nzc1IDE1LjgxMzEgMzQuMzI5OEMxNS41OTY1IDM0LjE4MzUgMTUuMjk2OSAzNC4wMzU4IDE0LjkxMjggMzMuODg4MUMxNC41Mjg4IDMzLjc0MDQgMTQuMDMwOCAzMy41ODcxIDEzLjQxNiAzMy40MjUzQzEyLjY3NjEgMzMuMjM0IDEyLjAwNzkgMzMuMDIwMSAxMS40MDcyIDMyLjc4NTJDMTAuODA2NSAzMi41NDg5IDEwLjI5NzIgMzIuMjU5MSA5Ljg3OTQzIDMxLjkxM0M5LjQ2MDIyIDMxLjU2NyA5LjEzNjY2IDMxLjEzNjUgOC45MDU5NSAzMC42MjE2QzguNjc1MjQgMzAuMTA2NyA4LjU2MTMgMjkuNDY1MyA4LjU2MTMgMjguNzAxNFYyOC42NTc4QzguNTYxMyAyNy45NTAyIDguNjg1MDkgMjcuMzE0MyA4LjkzNDA5IDI2Ljc0NzRDOS4xODMwOCAyNi4xODA1IDkuNTMxOTYgMjUuNjkwOSA5Ljk4MjEyIDI1LjI3ODdDMTAuNDMwOSAyNC44NjY2IDEwLjk2NjkgMjQuNTUgMTEuNTkxNSAyNC4zMjkyQzEyLjIxNDYgMjQuMTA4MyAxMi45MDI2IDIzLjk5ODYgMTMuNjUzOCAyMy45OTg2QzE0LjcyNTcgMjMuOTk4NiAxNS43MDkgMjQuMTY4OCAxNi42MDY1IDI0LjUwNjRDMTcuNTA0MSAyNC44NDU1IDE4LjMyODQgMjUuMzMwOCAxOS4wNzk2IDI1Ljk2MzhMMTcuNDExMiAyOC41MjQxQzE2Ljc1NzEgMjguMDUyOSAxNi4xMTcgMjcuNjgxNSAxNS40OTEgMjcuNDA4NkMxNC44NjUgMjcuMTM3MSAxNC4yMzkgMjcuMDAwNiAxMy42MTMgMjcuMDAwNkMxMi45ODcgMjcuMDAwNiAxMi41MTcxIDI3LjEzIDEyLjIwNDggMjcuMzg3NUMxMS44OTExIDI3LjY0NDkgMTEuNzM0OSAyNy45NjU3IDExLjczNDkgMjguMzQ4M1YyOC4zOTE5QzExLjczNDkgMjguNjQyMyAxMS43OCAyOC44NTg5IDExLjg3MTQgMjkuMDQzMkMxMS45NjE0IDI5LjIyNjEgMTIuMTI2IDI5LjM5MjEgMTIuMzYyNCAyOS41Mzk4QzEyLjU5ODcgMjkuNjg3NSAxMi45MjM3IDI5LjgyNjggMTMuMzM1OCAyOS45NTlDMTMuNzQ2NiAzMC4wOTI3IDE0LjI2NzEgMzAuMjQ2IDE0Ljg5NDUgMzAuNDIzM0MxNS42MzMxIDMwLjYzMDEgMTYuMjkyOCAzMC44NjA4IDE2Ljg3MjQgMzEuMTE4MkMxNy40NTIgMzEuMzc1NiAxNy45Mzg3IDMxLjY4NTEgMTguMzM2OSAzMi4wNDUzQzE4LjczMzYgMzIuNDA1NCAxOS4wMzQ2IDMyLjgyODggMTkuMjM1OCAzMy4zMTQxQzE5LjQzODQgMzMuNzk5NSAxOS41MzgyIDM0LjM4MTkgMTkuNTM4MiAzNS4wNTg1VjM1LjEwMzVDMTkuNTM4MiAzNS44Njg4IDE5LjQwNzQgMzYuNTQ5NyAxOS4xNDQzIDM3LjE0NDhDMTguODgxMyAzNy43NDEyIDE4LjUxNTUgMzguMjQwNiAxOC4wNDU3IDM4LjY0NThDMTcuNTc1OCAzOS4wNTA5IDE3LjAxNDUgMzkuMzYwNCAxNi4zNjMyIDM5LjU3MjhDMTUuNzExOCAzOS43ODY2IDE0Ljk4ODggMzkuODkzNiAxNC4xOTU0IDM5Ljg5MzZIMTQuMTk4MloiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik00MS4zOTIyIDI0SDQ0Ljg1NTdMNDguNjk0NyAzMC41MzQ0TDUyLjUzNTIgMjRINTZWNDAuMDAwNUg1Mi44Mjc4VjI5LjM2NEw0OC43MTcyIDM1Ljk2NDVINDguNjM0Mkw0NC41NjQ1IDI5LjQzMDFWMzkuOTk5MUg0MS4zOTIyVjI0WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTMwLjU4NjkgMzYuMzYyNkMzMC4wMDg3IDM2LjY4NjIgMjkuMzAzOSAzNi44NDc5IDI4LjQ2OTcgMzYuODQ3OUMyNy44NDM3IDM2Ljg0NzkgMjcuMjY5OCAzNi43MTk5IDI2Ljc0NzkgMzYuNDYxMUMyNi4yMjYgMzYuMjAzNiAyNS43OCAzNS44NTQ4IDI1LjQxMjkgMzUuNDEzQzI1LjA0MjkgMzQuOTcxMyAyNC43NTU5IDM0LjQ1NjQgMjQuNTQ2MyAzMy44NjdDMjQuMzM4MSAzMy4yNzkgMjQuMjM0IDMyLjY1MyAyNC4yMzQgMzEuOTkwNFYzMS45NDY4QzI0LjIzNCAzMS4yODQyIDI0LjMzODEgMzAuNjYzOCAyNC41NDYzIDMwLjA4MTRDMjQuNzU1OSAyOS41MDA0IDI1LjA0NzEgMjguOTg4NCAyNS40MjQxIDI4LjU0NjZDMjUuNzk5NyAyOC4xMDQ5IDI2LjI0ODUgMjcuNzYwMyAyNi43NzA0IDI3LjUwODVDMjcuMjkyMyAyNy4yNTgxIDI3Ljg1OTIgMjcuMTMyOSAyOC40NzExIDI3LjEzMjlDMjkuMjA4MyAyNy4xMzI5IDI5Ljg3MjMgMjcuMjg3NiAzMC40NjMxIDI3LjU5NzFDMzAuNzE5MSAyNy43MzA3IDMwLjM1NzYgMjcuNDkwMiAzMC42MDk0IDI3LjY2NzRMMzIuMjc5MiAyNS4xMDU3QzMxLjkxNDkgMjQuNjQwMSAzMC45MjMxIDI0LjI5MjYgMzAuMzU5IDI0LjE3NDRDMjkuNzk0OSAyNC4wNTc3IDI5LjE3MzEgMjMuOTk3MiAyOC40OTA4IDIzLjk5NzJDMjcuMzY0IDIzLjk5NzIgMjYuMzM0MyAyNC4yMDY4IDI1LjQwMTYgMjQuNjI2QzI0LjQ3MDMgMjUuMDQ2NiAyMy42Njk5IDI1LjYyMDYgMjMuMDAxNyAyNi4zNDc5QzIyLjMzMzUgMjcuMDc2NiAyMS44MTE2IDI3LjkyMiAyMS40MzU5IDI4Ljg4NzFDMjEuMDYwMyAyOS44NTIxIDIwLjg3MzIgMzAuODg0NyAyMC44NzMyIDMxLjk4OVYzMi4wMzI2QzIwLjg3MzIgMzMuMTM2OSAyMS4wNjAzIDM0LjE3MzcgMjEuNDM1OSAzNS4xNDU4QzIxLjgxMTYgMzYuMTE2NCAyMi4zMzM1IDM2Ljk1OTEgMjMuMDAxNyAzNy42NzIzQzIzLjY2OTkgMzguMzg2OSAyNC40NjMzIDM4Ljk0OTYgMjUuMzgwNSAzOS4zNjE4QzI2LjI5OTEgMzkuNzc0IDI3LjI5MzcgMzkuOTc5NCAyOC4zNjQyIDM5Ljk3OTRDMjkuMDczMiAzOS45Nzk0IDI5LjcxNjEgMzkuOTI3MyAzMC4yODQ1IDM5Ljc5MjNDMzAuNzgyNSAzOS42NzI3IDMxLjE2NjUgMzkuNTMyIDMxLjUyOTQgMzkuMzQ5MUMzMS43ODI3IDM5LjIyMjUgMzIuMDI3NCAzOS4wODYxIDMyLjI1NTMgMzguOTIwMUwzMC41ODU1IDM2LjM1OThMMzAuNTg2OSAzNi4zNjI2WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTM0LjQxNDcgMzkuOTY5NUMzNS4yNDYxIDM5Ljk2OTUgMzUuMzA1MiAzOS45NzA5IDM1LjM2MTQgMzkuOTcwOUMzNS45NjY0IDM5Ljk4MDggMzYuMTE1NSA0MC4wMjAyIDM2LjY2NDEgMzkuODM1OUMzNy4yMTI3IDM5LjY1MyAzNy41ODU1IDM5LjA3OSAzNy43MzA0IDM4LjU3NjhDMzcuODc1MyAzOC4wNzYgMzcuNzY4NCAzNy40Mzg4IDM3LjY0MDQgMzYuOTU0OEMzNy41ODU1IDM2Ljc0OCAzNy44NjgzIDM2LjYxNDQgMzcuOTQgMzYuNTQ4M0MzOC4wNjUyIDM2LjQzMTUgMzguMTA0NiAzNi4xNjcxIDM4LjAzOTkgMzYuMDU0NUMzNy45NzUyIDM1Ljk0MzQgMzcuOTEzMyAzNS44NjA0IDM3LjcxNSAzNS43NTQ5QzM3LjcxNSAzNS43NTQ5IDM3Ljg1NTYgMzUuNzA1NiAzOC4wMzg1IDM1LjU4NDdDMzguMjY5MiAzNS40MzI3IDM4LjQ2MzQgMzUuMjg5MiAzOC40MTEzIDM1LjAzNkMzOC4zODYgMzQuOTEyMiAzOC4yODE5IDM0LjY5ODQgMzguMTUzOSAzNC40MDNDMzguMDUyNiAzNC4xNjk1IDM4LjExNDUgMzMuNzk4MSAzOC4yNDM5IDMzLjYzMDdDMzguNDM5NCAzMy4zNzQ2IDM4Ljc3NDIgMzMuMzE3IDM4Ljk3NjggMzMuMTc2M0MzOS4xODA4IDMzLjAzNTYgMzkuMzcwNyAzMi44OTkyIDM5LjQ4ODkgMzIuNDc4NUMzOS42MDcgMzIuMDU2NSAzOS4yMDc1IDMxLjY1ODQgMzguNzg4MyAzMS4wNzQ2QzM4LjQyNTQgMzAuNTY4MiAzOC4wMjMgMzAuMDUxOSAzNy43MTkyIDI5LjU2MzdDMzcuMTg3NCAyOC43MDg0IDM3LjgxMDYgMjguNDM4MyAzNy45MzQ0IDI3LjgzMzRDMzguMDU5NiAyNy4yMjk5IDM3LjU5MjYgMjYuMzA5OSAzNy40MzA4IDI1Ljc0NzJDMzcuMjQ1MSAyNS4wOTg3IDM3LjA1MzggMjQuNjQyOSAzNi41NiAyNEgzNC40MTE5VjM5Ljk2OTVIMzQuNDE0N1oiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=
description: "SCIM 2.0 as a System of Record"
address: "{{Input Required: SCIM URL}}"
defaultSyncFrequency: HOURLY
defaultSyncMinInterval: 1
defaultApiCallFrequency: SECONDLY
defaultApiCallMinInterval: 1
type: "SCIM2.0-1.0.0"
# Example Configs:
# empty config: {} | b64: "e30="
# config with filtering on Users: {"Users":{"queryParams":{"filter":"displayName eq \"SGNL\""}}} | b64: "eyJVc2VycyI6eyJxdWVyeVBhcmFtcyI6eyJmaWx0ZXIiOiJkaXNwbGF5TmFtZSBlcSBcIlNHTkxcIiJ9fQ=="
# config with filter, ordering and sortBy on Groups {"Groups":{"queryParams":{"filter":"displayName eq \"SGNL\"","sortBy":"userName","ascending":true}}} | b64: "eyJHcm91cHMiOnsicXVlcnlQYXJhbXMiOnsiZmlsdGVyIjoiZGlzcGxheU5hbWUgZXEgXCJTR05MXCIiLCJzb3J0QnkiOiJ1c2VyTmFtZSIsImFzY2VuZGluZyI6dHJ1ZX19fQ=="
adapterConfig: "e30=" # {}
# All auth mechanisms specified below must be supported by the specified Adapter.
auth:
  - basic:
      username: "{{Input Required: Username}}"
      password: "{{Input Required: API Token}}"
  - bearer:
      authToken: "{{Input Required: token}}"
  - oAuth2ClientCredentials:
      clientId: "{{Input Required: Client-ID}}"
      clientSecret: "{{Input Required: Client-Secret}}"
      tokenUrl: "{{Input Required: AuthTokenURL}}"
      scope: "{{Input Required: Scope}}"
      authStyle: AutoDetect
entities:
  User:
    displayName: User
    externalId: Users
    description: User entity in SCIM
    pageSize: 100
    pagesOrderedById: false
    attributes:
      - name: id
        externalId: id
        type: String
        indexed: true
        uniqueId: true
      - name: externalId
        externalId: externalId
        type: String
        indexed: true
      - name: userName
        externalId: userName
        type: String
        indexed: true
      - name: formattedName
        externalId: $.name.formatted
        type: String
      - name: familyName
        externalId: $.name.familyName
        type: String
      - name: givenName
        externalId: $.name.givenName
        type: String
      - name: middleName
        externalId: $.name.middleName
        type: String
      - name: honorificPrefix
        externalId: $.name.honorificPrefix
        type: String
      - name: honorificSuffix
        externalId: $.name.honorificSuffix
        type: String
      - name: displayName
        externalId: displayName
        type: String
      - name: nickName
        externalId: nickName
        type: String
      - name: profileUrl
        externalId: profileUrl
        type: String
      - name: userType
        externalId: userType
        type: String
      - name: title
        externalId: title
        type: String
      - name: preferredLanguage
        externalId: preferredLanguage
        type: String
      - name: locale
        externalId: locale
        type: String
      - name: timezone
        externalId: timezone
        type: String
      - name: active
        externalId: active
        type: Bool

      # Enterprise User Extension
      - name: employeeNumber
        externalId: $..["urn:ietf:params:scim:schemas:extension:enterprise:2.0:User"].employeeNumber
        type: String
        indexed: true
      - name: costCenter
        externalId: $..["urn:ietf:params:scim:schemas:extension:enterprise:2.0:User"].costCenter
        type: String
      - name: organization
        externalId: $..["urn:ietf:params:scim:schemas:extension:enterprise:2.0:User"].organization
        type: String
      - name: division
        externalId: $..["urn:ietf:params:scim:schemas:extension:enterprise:2.0:User"].division
        type: String
      - name: department
        externalId: $..["urn:ietf:params:scim:schemas:extension:enterprise:2.0:User"].department
        type: String
      - name: managerId
        externalId: $..["urn:ietf:params:scim:schemas:extension:enterprise:2.0:User"].manager.value
        type: String
        indexed: true
      - name: managerDisplayName
        externalId: $..["urn:ietf:params:scim:schemas:extension:enterprise:2.0:User"].manager.displayName
        type: String

      # Meta
      - name: resourceType
        externalId: $.meta.resourceType
        type: String
      - name: created
        externalId: $.meta.created
        type: DateTime
      - name: lastModified
        externalId: $.meta.lastModified
        type: DateTime
      - name: version
        externalId: $.meta.version
        type: String
      - name: location
        externalId: $.meta.location
        type: String

  Group:
    displayName: Group
    externalId: Groups
    description: Group entity in SCIM
    pageSize: 100
    pagesOrderedById: false
    attributes:
      - name: id
        externalId: id
        type: String
        indexed: true
        uniqueId: true
      - name: displayName
        externalId: displayName
        type: String
      - name: resourceType
        externalId: $.meta.resourceType
        type: String
      - name: location
        externalId: $.meta.location
        type: String

  GroupMember:
    parent: Users
    displayName: GroupMember
    externalId: groups
    description: Entity representing the SCIM groups each user belongs to
    pageSize: 100
    pagesOrderedById: false
    attributes:
      - name: value
        externalId: value
        type: String
        indexed: true
        uniqueId: true
      - name: display
        externalId: display
        type: String
      - name: type
        externalId: type
        type: String
      - name: ref
        externalId: '$..["$ref"]'
        type: String

  Email:
    parent: Users
    displayName: UserEmail
    externalId: emails
    description: Entity representing SCIM user emails
    pageSize: 100
    pagesOrderedById: false
    attributes:
      - name: value
        externalId: value
        type: String
        indexed: true
        uniqueId: true
      - name: display
        externalId: display
        type: String
      - name: type
        externalId: type
        type: String
      - name: primary
        externalId: primary
        type: Bool

  Address:
    parent: Users
    displayName: UserAddress
    externalId: addresses
    description: Entity representing SCIM user addresses
    pageSize: 100
    pagesOrderedById: false
    attributes:
      - name: formatted
        externalId: formatted
        type: String
        indexed: true
        uniqueId: true
      - name: streetAddress
        externalId: streetAddress
        type: String
      - name: locality
        externalId: locality
        type: String
      - name: region
        externalId: region
        type: String
      - name: postalCode
        externalId: postalCode
        type: String
      - name: country
        externalId: country
        type: String
      - name: type
        externalId: type
        type: String

  PhoneNumber:
    parent: Users
    displayName: UserPhoneNumber
    externalId: phoneNumbers
    description: Entity representing SCIM user phone numbers
    pageSize: 100
    pagesOrderedById: false
    attributes:
      - name: value
        externalId: value
        type: String
        indexed: true
        uniqueId: true
      - name: display
        externalId: display
        type: String
      - name: type
        externalId: type
        type: String
      - name: primary
        externalId: primary
        type: Bool

  IMS:
    parent: Users
    displayName: UserIMS
    externalId: ims
    description: Entity representing SCIM user ims
    pageSize: 100
    pagesOrderedById: false
    attributes:
      - name: value
        externalId: value
        type: String
        indexed: true
        uniqueId: true
      - name: display
        externalId: display
        type: String
      - name: type
        externalId: type
        type: String
      - name: primary
        externalId: primary
        type: Bool

  Entitlement:
    parent: Users
    displayName: UserEntitlement
    externalId: entitlements
    description: Entity representing SCIM user entitlements
    pageSize: 100
    pagesOrderedById: false
    attributes:
      - name: value
        externalId: value
        type: String
        indexed: true
        uniqueId: true
      - name: display
        externalId: display
        type: String
      - name: type
        externalId: type
        type: String
      - name: primary
        externalId: primary
        type: Bool

  Roles:
    parent: Users
    displayName: UserRole
    externalId: roles
    description: Entity representing SCIM user roles
    pageSize: 100
    pagesOrderedById: false
    attributes:
      - name: value
        externalId: value
        type: String
        indexed: true
        uniqueId: true
      - name: display
        externalId: display
        type: String
      - name: type
        externalId: type
        type: String
      - name: primary
        externalId: primary
        type: Bool

  Photo:
    parent: Users
    displayName: UserPhoto
    externalId: photos
    description: Entity representing SCIM user photos
    pageSize: 100
    pagesOrderedById: false
    attributes:
      - name: value
        externalId: value
        type: String
        indexed: true
        uniqueId: true
      - name: display
        externalId: display
        type: String
      - name: type
        externalId: type
        type: String
      - name: primary
        externalId: primary
        type: Bool

  Certificate:
    parent: Users
    displayName: UserCertificate
    externalId: certificates
    description: Entity representing SCIM user certificates
    pageSize: 100
    pagesOrderedById: false
    attributes:
      - name: value
        externalId: value
        type: String
        indexed: true
        uniqueId: true
      - name: display
        externalId: display
        type: String
      - name: type
        externalId: type
        type: String
      - name: primary
        externalId: primary
        type: Bool

relationships:
  # Manager relationship
  UserManager:
    name: Manager
    displayName: User Manager
    fromAttribute: Users.$..["urn:ietf:params:scim:schemas:extension:enterprise:2.0:User"].manager.value
    toAttribute: Users.id
  MemberOf:
    name: MemberOf
    displayName: Member Of
    fromAttribute: groups.value
    toAttribute: Groups.id
  UserMemberGroup:
    name: Group
    displayName: User Member Group
    path:
      - relationship: ParentOfGroupMember
        direction: Backward
      - relationship: MemberOf
        direction: Forward
  # Parent relationships
  ParentOfGroupMember:
    childEntity: groups
  ParentOfEmail:
    childEntity: emails
  ParentOfAddress:
    childEntity: addresses
  ParentOfPhoneNumber:
    childEntity: phoneNumbers
  ParentOfIMS:
    childEntity: ims
  ParentOfEntitlement:
    childEntity: entitlements
  ParentOfRole:
    childEntity: roles
  ParentOfPhoto:
    childEntity: photos
  ParentOfCertificate:
    childEntity: certificates